    Checking jpegexp-rs v0.1.0 (C:\Users\aroja\CODE\jpegls-rs)
warning: unused imports: `MAXIMUM_BITS_PER_SAMPLE`, `MAXIMUM_COMPONENT_COUNT_IN_SCAN`, and `MINIMUM_BITS_PER_SAMPLE`
 --> src\jpeg_stream_reader.rs:5:5
  |
5 |     MAXIMUM_BITS_PER_SAMPLE, MAXIMUM_COMPONENT_COUNT_IN_SCAN,
  |     ^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 |     MINIMUM_BITS_PER_SAMPLE,
  |     ^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `ColorTransformation` and `CompressedDataFormat`
  --> src\jpeg_stream_reader.rs:11:5
   |
11 |     CompressedDataFormat, FrameInfo, InterleaveMode, SpiffHeader, ColorTransformation
   |     ^^^^^^^^^^^^^^^^^^^^                                          ^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::convert::TryInto`
 --> src\scan_decoder.rs:1:5
  |
1 | use std::convert::TryInto;
  |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `InterleaveMode`
 --> src\scan_encoder.rs:5:24
  |
5 | use crate::{FrameInfo, InterleaveMode, JpeglsPcParameters};
  |                        ^^^^^^^^^^^^^^

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:121:9
    |
116 |     fn read_marker(&mut self) -> Result<JpegMarkerCode, JpeglsError> {
    |                                  ----------------------------------- expected `Result<JpegMarkerCode, JpeglsError>` because of return type
...
121 |         JpegMarkerCode::try_from(marker_byte)
    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `Result<JpegMarkerCode, JpeglsError>`, found `Result<JpegMarkerCode, ...>`
    |
    = note: expected enum `Result<_, JpeglsError>`
               found enum `Result<_, TryFromPrimitiveError<JpegMarkerCode>>`

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:135:34
    |
135 |         self.frame_info.height = self.read_u16()? as i32;
    |         ----------------------   ^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `i32`
    |         |
    |         expected due to the type of this binding

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:136:33
    |
136 |         self.frame_info.width = self.read_u16()? as i32;
    |         ---------------------   ^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `i32`
    |         |
    |         expected due to the type of this binding

error[E0277]: the trait bound `InterleaveMode: TryFrom<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:171:43
    |
171 |         self.parameters.interleave_mode = InterleaveMode::try_from(self.read_byte()?)?;
    |                                           ^^^^^^^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `InterleaveMode`
   --> src\lib.rs:8:1
    |
  8 | pub enum InterleaveMode {
    | ^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<InterleaveMode>`
    = note: required for `InterleaveMode` to implement `TryFrom<u8>`

error[E0277]: `?` couldn't convert the error to `JpeglsError`
   --> src\jpeg_stream_reader.rs:171:86
    |
171 |         self.parameters.interleave_mode = InterleaveMode::try_from(self.read_byte()?)?;
    |                                           -------------------------------------------^ the trait `From<Infallible>` is not implemented for `JpeglsError`
    |                                           |
    |                                           this can't be annotated with `?` because it has type `Result<_, Infallible>`
    |
note: `JpeglsError` needs to implement `From<Infallible>`
   --> src\error.rs:4:1
    |
  4 | pub enum JpeglsError {
    | ^^^^^^^^^^^^^^^^^^^^
    = note: the question mark operation (`?`) implicitly performs a conversion on the error value using the `From` trait

error[E0277]: the trait bound `InterleaveMode: From<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:171:43
    |
171 |         self.parameters.interleave_mode = InterleaveMode::try_from(self.read_byte()?)?;
    |                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `InterleaveMode`
   --> src\lib.rs:8:1
    |
  8 | pub enum InterleaveMode {
    | ^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<InterleaveMode>`
    = note: required for `InterleaveMode` to implement `TryFrom<u8>`

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:209:22
    |
209 |              height: height as i32,
    |                      ^^^^^^^^^^^^^ expected `u32`, found `i32`

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:210:21
    |
210 |              width: width as i32,
    |                     ^^^^^^^^^^^^ expected `u32`, found `i32`

error[E0277]: the trait bound `SpiffProfileId: TryFrom<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:207:37
    |
207 |              profile_id: profile_id.try_into().map_err(|_| JpeglsError::InvalidData)?,
    |                                     ^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `SpiffProfileId`
   --> src\lib.rs:31:1
    |
 31 | pub enum SpiffProfileId {
    | ^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<SpiffProfileId>`
    = note: required for `SpiffProfileId` to implement `TryFrom<u8>`
    = note: required for `u8` to implement `TryInto<SpiffProfileId>`

error[E0277]: the trait bound `SpiffColorSpace: TryFrom<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:211:39
    |
211 |              color_space: color_space.try_into().map_err(|_| JpeglsError::InvalidData)?,
    |                                       ^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `SpiffColorSpace`
   --> src\lib.rs:40:1
    |
 40 | pub enum SpiffColorSpace {
    | ^^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<SpiffColorSpace>`
    = note: required for `SpiffColorSpace` to implement `TryFrom<u8>`
    = note: required for `u8` to implement `TryInto<SpiffColorSpace>`

error[E0277]: the trait bound `SpiffCompressionType: TryFrom<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:213:49
    |
213 |              compression_type: compression_type.try_into().map_err(|_| JpeglsError::InvalidData)?,
    |                                                 ^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `SpiffCompressionType`
   --> src\lib.rs:57:1
    |
 57 | pub enum SpiffCompressionType {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<SpiffCompressionType>`
    = note: required for `SpiffCompressionType` to implement `TryFrom<u8>`
    = note: required for `u8` to implement `TryInto<SpiffCompressionType>`

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:215:35
    |
215 |              vertical_resolution: vertical_resolution as i32,
    |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `i32`

error[E0308]: mismatched types
   --> src\jpeg_stream_reader.rs:216:37
    |
216 |              horizontal_resolution: horizontal_resolution as i32,
    |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `u32`, found `i32`

error[E0277]: the trait bound `SpiffResolutionUnits: TryFrom<u8>` is not satisfied
   --> src\jpeg_stream_reader.rs:214:49
    |
214 |              resolution_units: resolution_units.try_into().map_err(|_| JpeglsError::InvalidData)?,
    |                                                 ^^^^^^^^ unsatisfied trait bound
    |
help: the trait `From<u8>` is not implemented for `SpiffResolutionUnits`
   --> src\lib.rs:68:1
    |
 68 | pub enum SpiffResolutionUnits {
    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    = note: required for `u8` to implement `Into<SpiffResolutionUnits>`
    = note: required for `SpiffResolutionUnits` to implement `TryFrom<u8>`
    = note: required for `u8` to implement `TryInto<SpiffResolutionUnits>`

error[E0308]: mismatched types
   --> src\scan_decoder.rs:334:51
    |
334 |                     if start_index + run_length + i > width { return Err(JpeglsError::InvalidData); }
    |                                                   ^ expected `usize`, found `i32`

error[E0277]: cannot add `i32` to `usize`
   --> src\scan_decoder.rs:334:49
    |
334 |                     if start_index + run_length + i > width { return Err(JpeglsError::InvalidData); }
    |                                                 ^ no implementation for `usize + i32`
    |
    = help: the trait `Add<i32>` is not implemented for `usize`
    = help: the following other types implement trait `Add<Rhs>`:
              `&usize` implements `Add<usize>`
              `&usize` implements `Add`
              `usize` implements `Add<&usize>`
              `usize` implements `Add`

error[E0308]: mismatched types
   --> src\scan_decoder.rs:335:58
    |
335 |                     curr_line[start_index + run_length + i] = curr_line[start_index - 1];
    |                                                          ^ expected `usize`, found `i32`

error[E0277]: cannot add `i32` to `usize`
   --> src\scan_decoder.rs:335:56
    |
335 |                     curr_line[start_index + run_length + i] = curr_line[start_index - 1];
    |                                                        ^ no implementation for `usize + i32`
    |
    = help: the trait `Add<i32>` is not implemented for `usize`
    = help: the following other types implement trait `Add<Rhs>`:
              `&usize` implements `Add<usize>`
              `&usize` implements `Add`
              `usize` implements `Add<&usize>`
              `usize` implements `Add`

error[E0599]: no method named `decode_error_value` found for struct `RunModeContext` in the current scope
   --> src\scan_decoder.rs:365:65
    |
365 |         let error_value = self.run_mode_contexts[context_index].decode_error_value(mapped_error, k);
    |                                                                 ^^^^^^^^^^^^^^^^^^
    |
   ::: src\run_mode_context.rs:4:1
    |
  4 | pub struct RunModeContext {
    | ------------------------- method `decode_error_value` not found for this struct
    |
help: there is a method `compute_error_value` with a similar name
    |
365 -         let error_value = self.run_mode_contexts[context_index].decode_error_value(mapped_error, k);
365 +         let error_value = self.run_mode_contexts[context_index].compute_error_value(mapped_error, k);
    |

warning: unused variable: `bytes_written`
  --> src\encoder.rs:78:14
   |
78 |          let bytes_written = if frame_info.bits_per_sample <= 8 {
   |              ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default
help: if this is intentional, prefix it with an underscore
   |
78 |          let _bytes_written = if frame_info.bits_per_sample <= 8 {
   |              +
help: you might have meant to pattern match on the similarly named constant `SEGMENT_MAX_DATA_SIZE`
   |
78 -          let bytes_written = if frame_info.bits_per_sample <= 8 {
78 +          let constants::SEGMENT_MAX_DATA_SIZE = if frame_info.bits_per_sample <= 8 {
   |

warning: unused variable: `destination_row`
   --> src\scan_decoder.rs:124:18
    |
124 |              let destination_row = &mut destination[(line * stride).. (line * stride + width * components * std::mem::size_of::<T>())];
    |                  ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_destination_row`

Some errors have detailed explanations: E0277, E0308, E0599.
For more information about an error, try `rustc --explain E0277`.
warning: `jpegexp-rs` (lib) generated 6 warnings
error: could not compile `jpegexp-rs` (lib) due to 19 previous errors; 6 warnings emitted
